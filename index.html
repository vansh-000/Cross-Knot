<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cross & Knots</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap");

    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
    }

    body {
      background-color: rgb(40, 76, 124);
      height: 100vh;
      font-family: "Roboto", sans-serif;
      color: #a7bfdc;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      width: 90%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    .tools,
    .stats {
      width: 100%;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 20px;
      background: linear-gradient(#061423, #0d1f32);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    }

    .symbols i:nth-child(odd) {
      color: #febf14;
    }

    .reset,
    .new-game {
      cursor: pointer;
      color: #febf14;
      font-size: 1.2em;
      transition: transform 0.3s;
    }

    .reset:hover,
    .new-game:hover {
      transform: scale(1.1);
    }

    .cells {
      display: flex;
      flex-wrap: wrap;
      width: 300px;
      gap: 10px;
    }

    .cell {
      width: 90px;
      height: 90px;
      background-color: #0d1f32;
      border-radius: 10px;
      box-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
      cursor: pointer;
      color: #a7bfdc;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 3em;
      transition: background-color 0.3s;
    }

    .cell:hover {
      background-color: #19375b;
    }

    .player,
    .draws {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    label {
      font-weight: 700;
      font-size: 0.9em;
      margin-bottom: 5px;
    }

    .stats span {
      color: #febf14;
      font-size: 1.2em;
    }

    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1;
      display: none;
    }

    #message {
      padding: 40px;
      width: 50%;
      background-color: #142c46;
      border-radius: 10px;
      border: 1px solid #19375b;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.7);
      text-align: center;
      animation: popup 0.5s ease-in-out;
    }

    @keyframes popup {
      0% {
        transform: scale(0.5);
      }
      100% {
        transform: scale(1);
      }
    }

    #message h2 {
      color: #febf14;
      margin-top: 10px;
    }

    .name-input {
      display: flex;
      flex-direction: column;
      width: 40%;
      align-items: center;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #142c46;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #19375b;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.7);
      z-index: 2;
    }

    .name-input label {
      color: #febf14;
      margin-bottom: 5px;
    }

    .name-input input {
      padding: 10px;
      border: none;
      border-radius: 5px;
      font-size: 1em;
      text-align: center;
      margin-bottom: 15px;
      width: 50%;
    }

    .name-input select {
      padding: 10px;
      border: none;
      border-radius: 5px;
      font-size: 1em;
      text-align: center;
      margin-bottom: 15px;
      width: 50%;
    }

    .start-game {
      color: #febf14;
      font-size: 1.2em;
      cursor: pointer;
      background-color: transparent;
      border: 1px solid #febf14;
      padding: 10px 20px;
      border-radius: 5px;
      transition: background-color 0.3s, color 0.3s;
    }

    .start-game:hover {
      background-color: #febf14;
      color: #142c46;
    }

    .new-game {
      margin-top: 10px;
      font-size: 1.2em;
    }
  </style>
  <body>
    <div id="overlay">
      <div id="message">
        <span id="winner-message">Player 1 is the</span>
        <h2 id="result">WINNER</h2>
      </div>
    </div>
    <div class="container">
      <div class="tools">
        <div class="symbols">
          <i class="fa-solid fa-x"></i>
          <i class="fa-regular fa-circle"></i>
        </div>
        <div class="turn">
          <span class="current-turn">Player 1's</span> turn
        </div>
        <div class="reset" id="reset-button">
          <i class="fa fa-rotate-right"></i>
        </div>
      </div>
      <div class="board">
        <div class="cells">
          <!-- Cells will be generated dynamically -->
        </div>
      </div>
      <div class="stats">
        <div class="player">
          <label>Player 1</label>
          <span class="score1">0</span>
        </div>
        <div class="draws">
          <label>Draws</label>
          <span class="draw">0</span>
        </div>
        <div class="player">
          <label>Player 2</label>
          <span class="score2">0</span>
        </div>
      </div>
      <div class="new-game" id="new-game">Start New Game</div>
    </div>
    <div class="name-input" id="name-input">
      <label for="player1-name">Player 1 Name:</label>
      <input type="text" id="player1-name" placeholder="Enter name" />
      <label for="player2-name">Player 2 Name:</label>
      <input type="text" id="player2-name" placeholder="Enter name" />
      <label for="grid-size">Grid Size:</label>
      <select id="grid-size">
        <option value="3">3x3</option>
        <option value="4">4x4</option>
        <option value="5">5x5</option>
      </select>
      <button class="start-game" id="start-game">Start Game</button>
    </div>
    <script>
      const cellsContainer = document.querySelector(".cells");
      const currentTurnSpan = document.querySelector(".current-turn");
      const overlay = document.getElementById("overlay");
      const winnerMessage = document.getElementById("winner-message");
      const resultMessage = document.getElementById("result");
      const resetBtn = document.getElementById("reset-button");
      const newGameBtn = document.getElementById("new-game");
      const player1NameInput = document.getElementById("player1-name");
      const player2NameInput = document.getElementById("player2-name");
      const nameInputDiv = document.getElementById("name-input");
      const startGameBtn = document.getElementById("start-game");
      const gridSizeSelect = document.getElementById("grid-size");

      let currentPlayer = "Player 1";
      let player1Score = 0;
      let player2Score = 0;
      let draws = 0;
      let gameBoard = [];
      let player1Name = "Player 1";
      let player2Name = "Player 2";
      let gridSize = 3;

      const winningCombinations = (size) => {
        let combinations = [];

        // Rows
        for (let i = 0; i < size; i++) {
          let row = [];
          for (let j = 0; j < size; j++) {
            row.push(i * size + j);
          }
          combinations.push(row);
        }

        // Columns
        for (let i = 0; i < size; i++) {
          let column = [];
          for (let j = 0; j < size; j++) {
            column.push(i + size * j);
          }
          combinations.push(column);
        }

        // Diagonals
        let diagonal1 = [];
        let diagonal2 = [];
        for (let i = 0; i < size; i++) {
          diagonal1.push(i * (size + 1));
          diagonal2.push((i + 1) * (size - 1));
        }
        combinations.push(diagonal1);
        combinations.push(diagonal2);

        return combinations;
      };

      const checkWinner = () => {
        const combinations = winningCombinations(gridSize);
        for (let combination of combinations) {
          const [a, b, c, d, e] = combination;
          if (
            gameBoard[a] &&
            gameBoard[a] === gameBoard[b] &&
            gameBoard[a] === gameBoard[c] &&
            (gridSize === 3 ||
              (gameBoard[a] === gameBoard[d] &&
                (gridSize === 4 || gameBoard[a] === gameBoard[e])))
          ) {
            return gameBoard[a];
          }
        }
        return gameBoard.includes(null) ? null : "Draw";
      };

      const resetGame = () => {
        gameBoard = Array(gridSize * gridSize).fill(null);
        cellsContainer.innerHTML = "";
        cellsContainer.style.width = `${gridSize * 90 + (gridSize - 1) * 10}px`;
        for (let i = 0; i < gameBoard.length; i++) {
          const cell = document.createElement("div");
          cell.classList.add("cell");
          cell.setAttribute("data-index", i);
          cellsContainer.appendChild(cell);
          cell.addEventListener("click", handleCellClick);
        }
        currentPlayer = player1Name;
        currentTurnSpan.textContent = `${currentPlayer}'s`;
      };

      const showOverlay = (message, result) => {
        winnerMessage.textContent = message;
        resultMessage.textContent = result;
        overlay.style.display = "flex";
        setTimeout(() => {
          overlay.style.display = "none";
          resetGame();
        }, 2000);
      };

      const handleCellClick = (e) => {
        const index = e.target.getAttribute("data-index");
        if (gameBoard[index] || checkWinner()) return;
        gameBoard[index] = currentPlayer;
        e.target.textContent = currentPlayer === player1Name ? "X" : "O";

        const winner = checkWinner();
        if (winner) {
          if (winner === "Draw") {
            draws++;
            document.querySelector(".draw").textContent = draws;
            showOverlay("It's a ", "DRAW");
          } else {
            if (winner === player1Name) {
              player1Score++;
              document.querySelector(".score1").textContent = player1Score;
            } else {
              player2Score++;
              document.querySelector(".score2").textContent = player2Score;
            }
            showOverlay(`${winner} is the `, "WINNER");
          }
        } else {
          currentPlayer =
            currentPlayer === player1Name ? player2Name : player1Name;
          currentTurnSpan.textContent = `${currentPlayer}'s`;
        }
      };

      const startNewGame = () => {
        nameInputDiv.style.display = "flex";
        player1Score = 0;
        player2Score = 0;
        draws = 0;
        document.querySelector(".score1").textContent = player1Score;
        document.querySelector(".score2").textContent = player2Score;
        document.querySelector(".draw").textContent = draws;
      };

      const startGame = () => {
        player1Name = player1NameInput.value || "Player 1";
        player2Name = player2NameInput.value || "Player 2";
        gridSize = parseInt(gridSizeSelect.value);
        document.querySelectorAll(".player label")[0].textContent = player1Name;
        document.querySelectorAll(".player label")[1].textContent = player2Name;
        currentPlayer = player1Name;
        currentTurnSpan.textContent = `${currentPlayer}'s`;
        nameInputDiv.style.display = "none";
        resetGame();
      };

      window.onload = () => {
        nameInputDiv.style.display = "flex";
      };

      resetBtn.addEventListener("click", resetGame);
      newGameBtn.addEventListener("click", startNewGame);
      startGameBtn.addEventListener("click", startGame);
    </script>
  </body>
</html>
